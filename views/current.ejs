<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script type="text/javascript-lazy">
  function testFunction(testValue){
    console.log("https://plantsense.herokuapp.com/finish/"+testValue);
    var xhttp = new XMLHttpRequest();
    xhttp.open("PUT", "https://plantsense.herokuapp.com/finish/"+testValue, false);
    xhttp.send();
    var response = JSON.parse(xhttp.responseText);
    location.reload();
  };
  </script>
</head>
<body>

  <div class="container">
  <h1>New Experiment</h1>
    <form class="form-inline" action="/hypothesis" method="post">
      <div class="form-group">
       <label for="hypothesis">Hypothesis:</label>
       <input type="text" class="form-control" name="hypothesis">
     </div>
     <br>
     <div class="form-group">
       (optional)
       <select class="form-control" name="dataX">
        <option>"Time"</option>
        <option>"Temperature"</option>
        <option>Light</option>
        <option>pH</option>
        <option>"Growth"</option>
        <option>"Health"</option>
      </select>
      and
      <select class="form-control" name="dataY">
        <option>"Time"</option>
        <option>"Temperature"</option>
        <option>Light</option>
        <option>pH</option>
        <option>"Growth"</option>
        <option>"Health"</option>
      </select>
      are
      <select class="form-control" name="corelation">
        <option>positively</option>
        <option>negatively</option>
        <option>not</option>
      </select>
      correlated.
      <br>
    </div>
    <br>
    <br>
    <button type="submit" class="btn btn-default">Create Experiment</button>
  </form>
</div>


<div class="container">
<h1>Current Experiments</h1>
<ul>
  <% experiments.forEach(function(experiment) { %>
  <%if (!experiment.terminated) { %>

  <li>
    <input type="checkbox" checked>
    <i></i>
    <h2>Hypothesis: <%= experiment.hypothesis %></h2>
    <div>
      Started: <%= experiment.startTime %>
      <br>

      End Experiment:
      <form class="form-inline" >
        Conclusion:
        <div class="col-10">
          <input class="form-control" type="text" value="What did you learn?" id="concluding-text">
        </div>
        Overall, we found data
        <select class="form-control" name="correlation">
          <option>did support</option>
          <option>did not support</option>
        </select>
        the hypothesis.
        <input class="invisible" type="text" value=<%= experiment.id %> name="testText">
        <button id="finishButton" onclick="testFunction(this.form.testText.value)">Finish Experiment</button>

      </form>

    </div>
  </li>
  <% } %>
  <% }); %>
</ul>
</div>
</body>
</html>
